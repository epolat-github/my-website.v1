{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nvar _jsxFileName = \"/home/epolat/Desktop/projects/website/pages/admin.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport addData from \"../src/dbCon\";\nimport { dbInstance, deletePost, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nconst transferData = data => {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n\n  const firestore = dbInstance();\n  let slug = data.blogSlug;\n  let name = data.blogName;\n  let detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML = \"Fill the required areas please.\";\n    return;\n  }\n\n  const post = {\n    blogName: name,\n    blogDetail: detail,\n    blogTime: _Date$now()\n  };\n  const docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n  docRef.set(post).then(() => {\n    console.log(\"Saved\");\n    location.reload();\n  }).catch(error => {\n    console.log(\"Got an error:\" + error);\n    document.getElementById(\"status\").innerHTML = `${error.message}`;\n  });\n};\n\nconst handlePostListClick = post => {\n  // change the look\n  let activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\"); // show post\n\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nconst handlePostDeleteClick = () => {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n\n  let postTitle = document.getElementById(\"inputName\").value;\n  let result = deletePost(postTitle);\n  result.then(() => {\n    alert(\"Deleted!\");\n    location.reload();\n  }).catch(() => alert(\"Could not deleted.\"));\n};\n\nconst listPosts = posts => {\n  return posts.map(post => {\n    return __jsx(\"button\", {\n      key: post.slug,\n      id: post.slug,\n      onClick: () => handlePostListClick(post),\n      className: \"list-group-item list-group-item-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, post.title);\n  });\n};\n\nconst Write = ({\n  posts\n}) => __jsx(Layout, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 80\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"jsx-3397116390\" + \" \" + \"container pt-5\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 81\n  },\n  __self: this\n}, __jsx(\"h1\", {\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 82\n  },\n  __self: this\n}, \"Inspire Someone!\"), __jsx(\"div\", {\n  className: \"jsx-3397116390\" + \" \" + \"form-group pt-3\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 83\n  },\n  __self: this\n}, __jsx(\"input\", {\n  type: \"text\",\n  placeholder: \"Blog Title\",\n  id: \"inputName\",\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 84\n  },\n  __self: this\n})), __jsx(\"div\", {\n  className: \"jsx-3397116390\" + \" \" + \"form-group pt-3\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 86\n  },\n  __self: this\n}, __jsx(\"textarea\", {\n  id: \"inputDetail\",\n  rows: \"20\",\n  className: \"jsx-3397116390\" + \" \" + \"form-control\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 87\n  },\n  __self: this\n})), __jsx(\"button\", {\n  type: \"button\",\n  onClick: () => {\n    transferData({\n      blogSlug: document.getElementById(\"inputName\").value.replace(/\\s+/g, \"-\").replace(/ı/g, \"i\").toLowerCase(),\n      blogName: document.getElementById(\"inputName\").value,\n      blogDetail: document.getElementById(\"inputDetail\").value\n    });\n  },\n  className: \"jsx-3397116390\" + \" \" + \"btn btn-lg btn-primary mt-3\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 93\n  },\n  __self: this\n}, \"Post\"), __jsx(\"button\", {\n  type: \"button\",\n  onClick: () => handlePostDeleteClick(),\n  className: \"jsx-3397116390\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 110\n  },\n  __self: this\n}, \"Delete\")), __jsx(\"hr\", {\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 119\n  },\n  __self: this\n}), __jsx(\"div\", {\n  className: \"jsx-3397116390\" + \" \" + \"container post-list-container mt-4 mb-5\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 121\n  },\n  __self: this\n}, __jsx(\"h1\", {\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 122\n  },\n  __self: this\n}, \"Post List\"), __jsx(\"ul\", {\n  id: \"post-list\",\n  className: \"jsx-3397116390\" + \" \" + \"list-group mt-3\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 123\n  },\n  __self: this\n}, listPosts(posts))), __jsx(\"div\", {\n  id: \"status-container\",\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 129\n  },\n  __self: this\n}, __jsx(\"p\", {\n  id: \"status\",\n  className: \"jsx-3397116390\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 130\n  },\n  __self: this\n})), __jsx(_JSXStyle, {\n  id: \"3397116390\",\n  __self: this\n}, \"h1.jsx-3397116390{color:#d1a172;text-align:center;font-weight:800;text-transform:uppercase;}hr.jsx-3397116390{border:1px solid #0069D9;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Vwb2xhdC9EZXNrdG9wL3Byb2plY3RzL3dlYnNpdGUvcGFnZXMvYWRtaW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUlnQixBQUd1QixBQU1XLGNBTFAsV0FNcEIsT0FMa0IsZ0JBQ1MseUJBQzNCIiwiZmlsZSI6Ii9ob21lL2Vwb2xhdC9EZXNrdG9wL3Byb2plY3RzL3dlYnNpdGUvcGFnZXMvYWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYWRkRGF0YSBmcm9tIFwiLi4vc3JjL2RiQ29uXCI7XG5pbXBvcnQgeyBkYkluc3RhbmNlLCBkZWxldGVQb3N0LCBhdXRoSW5zdGFuY2UsIGNoZWNrVXNlciB9IGZyb20gXCIuLi9zcmMvZGJDb25cIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvbGF5b3V0XCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xuXG5jb25zdCB0cmFuc2ZlckRhdGEgPSBkYXRhID0+IHtcbiAgaWYgKCFjb25maXJtKFwiQXJlIHlvdSBzdXJlP1wiKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBmaXJlc3RvcmUgPSBkYkluc3RhbmNlKCk7XG5cbiAgbGV0IHNsdWcgPSBkYXRhLmJsb2dTbHVnO1xuICBsZXQgbmFtZSA9IGRhdGEuYmxvZ05hbWU7XG4gIGxldCBkZXRhaWwgPSBkYXRhLmJsb2dEZXRhaWw7XG5cbiAgaWYgKHNsdWcgPT0gXCJcIiB8fCBuYW1lID09IFwiXCIgfHwgZGV0YWlsID09IFwiXCIpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKS5pbm5lckhUTUwgPVxuICAgICAgXCJGaWxsIHRoZSByZXF1aXJlZCBhcmVhcyBwbGVhc2UuXCI7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcG9zdCA9IHsgYmxvZ05hbWU6IG5hbWUsIGJsb2dEZXRhaWw6IGRldGFpbCwgYmxvZ1RpbWU6IERhdGUubm93KCkgfTtcblxuICBjb25zdCBkb2NSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbihcImJsb2dzXCIpLmRvYyhkYXRhLmJsb2dTbHVnKTtcblxuICBkb2NSZWZcbiAgICAuc2V0KHBvc3QpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJTYXZlZFwiKTtcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiR290IGFuIGVycm9yOlwiICsgZXJyb3IpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0dXNcIikuaW5uZXJIVE1MID0gYCR7ZXJyb3IubWVzc2FnZX1gO1xuICAgIH0pO1xufTtcblxuY29uc3QgaGFuZGxlUG9zdExpc3RDbGljayA9IHBvc3QgPT4ge1xuICAvLyBjaGFuZ2UgdGhlIGxvb2tcbiAgbGV0IGFjdGl2ZUxpc3RJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpO1xuICBhY3RpdmVMaXN0SXRlbXMgPyBhY3RpdmVMaXN0SXRlbXMuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKSA6IG51bGw7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc3Quc2x1ZykuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcblxuICAvLyBzaG93IHBvc3RcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dE5hbWVcIikudmFsdWUgPSBwb3N0LnRpdGxlO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0RGV0YWlsXCIpLnZhbHVlID0gcG9zdC5kZXRhaWxzO1xufTtcblxuY29uc3QgaGFuZGxlUG9zdERlbGV0ZUNsaWNrID0gKCkgPT4ge1xuICBpZiAoIWNvbmZpcm0oXCJBcmUgeW91IHN1cmU/IFwiKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgcG9zdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dE5hbWVcIikudmFsdWU7XG4gIGxldCByZXN1bHQgPSBkZWxldGVQb3N0KHBvc3RUaXRsZSk7XG5cbiAgcmVzdWx0XG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgYWxlcnQoXCJEZWxldGVkIVwiKTtcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKCgpID0+IGFsZXJ0KFwiQ291bGQgbm90IGRlbGV0ZWQuXCIpKTtcbn07XG5cbmNvbnN0IGxpc3RQb3N0cyA9IHBvc3RzID0+IHtcbiAgcmV0dXJuIHBvc3RzLm1hcChwb3N0ID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGJ1dHRvblxuICAgICAgICBrZXk9e3Bvc3Quc2x1Z31cbiAgICAgICAgaWQ9e3Bvc3Quc2x1Z31cbiAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlUG9zdExpc3RDbGljayhwb3N0KX1cbiAgICAgICAgY2xhc3NOYW1lPVwibGlzdC1ncm91cC1pdGVtIGxpc3QtZ3JvdXAtaXRlbS1hY3Rpb25cIlxuICAgICAgPlxuICAgICAgICB7cG9zdC50aXRsZX1cbiAgICAgIDwvYnV0dG9uPlxuICAgICk7XG4gIH0pO1xufTtcblxuY29uc3QgV3JpdGUgPSAoeyBwb3N0cyB9KSA9PiAoXG4gIDxMYXlvdXQ+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgcHQtNVwiPlxuICAgICAgPGgxPkluc3BpcmUgU29tZW9uZSE8L2gxPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwIHB0LTNcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJCbG9nIFRpdGxlXCIgaWQ9XCJpbnB1dE5hbWVcIiAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXAgcHQtM1wiPlxuICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICBpZD1cImlucHV0RGV0YWlsXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgIHJvd3M9XCIyMFwiXG4gICAgICAgID48L3RleHRhcmVhPlxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxnIGJ0bi1wcmltYXJ5IG10LTNcIlxuICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgdHJhbnNmZXJEYXRhKHtcbiAgICAgICAgICAgIGJsb2dTbHVnOiBkb2N1bWVudFxuICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dE5hbWVcIilcbiAgICAgICAgICAgICAgLnZhbHVlLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC/EsS9nLCBcImlcIilcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICBibG9nTmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dE5hbWVcIikudmFsdWUsXG4gICAgICAgICAgICBibG9nRGV0YWlsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0RGV0YWlsXCIpLnZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIFBvc3RcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sZyBidG4tc2Vjb25kYXJ5IG10LTMgbWwtM1wiXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVBvc3REZWxldGVDbGljaygpfVxuICAgICAgPlxuICAgICAgICBEZWxldGVcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuXG4gICAgPGhyIC8+XG5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBwb3N0LWxpc3QtY29udGFpbmVyIG10LTQgbWItNVwiPlxuICAgICAgPGgxPlBvc3QgTGlzdDwvaDE+XG4gICAgICA8dWwgaWQ9XCJwb3N0LWxpc3RcIiBjbGFzc05hbWU9XCJsaXN0LWdyb3VwIG10LTNcIj5cbiAgICAgICAgey8qIFRPRE86IHBvc3Qgc2x1ZyB8fCBiYcWfbMSxa2xhcmRhbiBvbHXFn2FuIGxpc3RlID0+IHNlw6dpbmNlIGVkaXQgdmUgZGVsZXRlIHNlw6dlbmVrbGVyaS4gKi99XG4gICAgICAgIHtsaXN0UG9zdHMocG9zdHMpfVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgaWQ9XCJzdGF0dXMtY29udGFpbmVyXCI+XG4gICAgICA8cCBpZD1cInN0YXR1c1wiPjwvcD5cbiAgICA8L2Rpdj5cbiAgICA8c3R5bGUganN4PntgXG4gICAgICBoMSB7XG4gICAgICAgIGNvbG9yOiAjZDFhMTcyO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB9XG4gICAgICBociB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDY5RDk7XG4gICAgICB9XG4gICAgYH08L3N0eWxlPlxuICA8L0xheW91dD5cbik7XG5cbldyaXRlLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuYmFzZVVybH1hcGkvcG9zdHNgKTtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB7XG4gICAgcG9zdHM6IGRhdGEucG9zdHNcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdyaXRlO1xuIl19 */\\n/*@ sourceURL=/home/epolat/Desktop/projects/website/pages/admin.js */\"));\n\nWrite.getInitialProps = async () => {\n  const res = await fetch(`${process.env.baseUrl}api/posts`);\n  const data = await res.json();\n  return {\n    posts: data.posts\n  };\n};\n\nexport default Write;","map":{"version":3,"sources":["/home/epolat/Desktop/projects/website/pages/admin.js"],"names":["addData","dbInstance","deletePost","authInstance","checkUser","Layout","fetch","transferData","data","confirm","firestore","slug","blogSlug","name","blogName","detail","blogDetail","document","getElementById","innerHTML","post","blogTime","docRef","collection","doc","set","then","console","log","location","reload","catch","error","message","handlePostListClick","activeListItems","querySelector","classList","toggle","value","title","details","handlePostDeleteClick","postTitle","result","alert","listPosts","posts","map","Write","replace","toLowerCase","getInitialProps","res","process","env","baseUrl","json"],"mappings":"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","sourcesContent":["import addData from \"../src/dbCon\";\nimport { dbInstance, deletePost, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nconst transferData = data => {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n  const firestore = dbInstance();\n\n  let slug = data.blogSlug;\n  let name = data.blogName;\n  let detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML =\n      \"Fill the required areas please.\";\n    return;\n  }\n\n  const post = { blogName: name, blogDetail: detail, blogTime: Date.now() };\n\n  const docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n\n  docRef\n    .set(post)\n    .then(() => {\n      console.log(\"Saved\");\n      location.reload();\n    })\n    .catch(error => {\n      console.log(\"Got an error:\" + error);\n      document.getElementById(\"status\").innerHTML = `${error.message}`;\n    });\n};\n\nconst handlePostListClick = post => {\n  // change the look\n  let activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\");\n\n  // show post\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nconst handlePostDeleteClick = () => {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n  let postTitle = document.getElementById(\"inputName\").value;\n  let result = deletePost(postTitle);\n\n  result\n    .then(() => {\n      alert(\"Deleted!\");\n      location.reload();\n    })\n    .catch(() => alert(\"Could not deleted.\"));\n};\n\nconst listPosts = posts => {\n  return posts.map(post => {\n    return (\n      <button\n        key={post.slug}\n        id={post.slug}\n        onClick={() => handlePostListClick(post)}\n        className=\"list-group-item list-group-item-action\"\n      >\n        {post.title}\n      </button>\n    );\n  });\n};\n\nconst Write = ({ posts }) => (\n  <Layout>\n    <div className=\"container pt-5\">\n      <h1>Inspire Someone!</h1>\n      <div className=\"form-group pt-3\">\n        <input type=\"text\" placeholder=\"Blog Title\" id=\"inputName\" />\n      </div>\n      <div className=\"form-group pt-3\">\n        <textarea\n          id=\"inputDetail\"\n          className=\"form-control\"\n          rows=\"20\"\n        ></textarea>\n      </div>\n      <button\n        type=\"button\"\n        className=\"btn btn-lg btn-primary mt-3\"\n        onClick={() => {\n          transferData({\n            blogSlug: document\n              .getElementById(\"inputName\")\n              .value.replace(/\\s+/g, \"-\")\n              .replace(/ı/g, \"i\")\n              .toLowerCase(),\n            blogName: document.getElementById(\"inputName\").value,\n            blogDetail: document.getElementById(\"inputDetail\").value\n          });\n        }}\n      >\n        Post\n      </button>\n      <button\n        type=\"button\"\n        className=\"btn btn-lg btn-secondary mt-3 ml-3\"\n        onClick={() => handlePostDeleteClick()}\n      >\n        Delete\n      </button>\n    </div>\n\n    <hr />\n\n    <div className=\"container post-list-container mt-4 mb-5\">\n      <h1>Post List</h1>\n      <ul id=\"post-list\" className=\"list-group mt-3\">\n        {/* TODO: post slug || başlıklardan oluşan liste => seçince edit ve delete seçenekleri. */}\n        {listPosts(posts)}\n      </ul>\n    </div>\n\n    <div id=\"status-container\">\n      <p id=\"status\"></p>\n    </div>\n    <style jsx>{`\n      h1 {\n        color: #d1a172;\n        text-align: center;\n        font-weight: 800;\n        text-transform: uppercase;\n      }\n      hr {\n        border: 1px solid #0069D9;\n      }\n    `}</style>\n  </Layout>\n);\n\nWrite.getInitialProps = async () => {\n  const res = await fetch(`${process.env.baseUrl}api/posts`);\n  const data = await res.json();\n  return {\n    posts: data.posts\n  };\n};\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}