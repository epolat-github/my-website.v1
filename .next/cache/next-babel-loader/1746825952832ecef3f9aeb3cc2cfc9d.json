{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport addData from \"../src/dbCon\";\nimport { saveAs } from 'file-saver';\nimport { dbInstance, deletePost, backup, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nconst transferData = data => {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n\n  const firestore = dbInstance();\n  let slug = data.blogSlug;\n  let name = data.blogName;\n  let detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML = \"Fill the required areas please.\";\n    return;\n  }\n\n  const post = {\n    blogName: name,\n    blogDetail: detail,\n    blogTime: _Date$now()\n  };\n  const docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n  docRef.set(post).then(() => {\n    alert(\"Saved!\");\n    location.reload();\n  }).catch(error => {\n    alert(error.message);\n    document.getElementById(\"status\").innerHTML = `${error.message}`;\n  });\n};\n\nconst handlePostListClick = post => {\n  // change the look\n  let activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\"); // show post\n\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nconst handlePostDeleteClick = () => {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n\n  let postTitle = document.getElementById(\"inputName\").value;\n  let result = deletePost(postTitle);\n  result.then(() => {\n    alert(\"Deleted!\");\n    location.reload();\n  }).catch(() => alert(\"Could not deleted.\"));\n};\n\nconst listPosts = posts => {\n  return posts.map(post => {\n    return __jsx(\"button\", {\n      key: post.slug,\n      id: post.slug,\n      onClick: () => handlePostListClick(post),\n      className: \"list-group-item list-group-item-action\"\n    }, post.title);\n  });\n};\n\nconst Write = ({\n  posts\n}) => __jsx(Layout, null, __jsx(\"article\", {\n  className: \"jsx-3964893965\" + \" \" + \"jumpotron\"\n}, __jsx(\"div\", {\n  className: \"jsx-3964893965\" + \" \" + \"container pt-5\"\n}, __jsx(\"h1\", {\n  className: \"jsx-3964893965\"\n}, \"Inspire Someone!\"), __jsx(\"div\", {\n  className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\"\n}, __jsx(\"input\", {\n  type: \"text\",\n  placeholder: \"Blog Title\",\n  id: \"inputName\",\n  className: \"jsx-3964893965\"\n})), __jsx(\"div\", {\n  className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\"\n}, __jsx(\"textarea\", {\n  id: \"inputDetail\",\n  rows: \"20\",\n  className: \"jsx-3964893965\" + \" \" + \"form-control\"\n})), __jsx(\"button\", {\n  type: \"button\",\n  onClick: () => {\n    transferData({\n      blogSlug: document.getElementById(\"inputName\").value.replace(/\\s+/g, \"-\").replace(/Ä±/g, \"i\").toLowerCase(),\n      blogName: document.getElementById(\"inputName\").value,\n      blogDetail: document.getElementById(\"inputDetail\").value\n    });\n  },\n  className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-primary mt-3\"\n}, \"Post\"), __jsx(\"button\", {\n  type: \"button\",\n  onClick: () => handlePostDeleteClick(),\n  className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\"\n}, \"Delete\"), __jsx(\"button\", {\n  type: \"button\",\n  onClick: () => {\n    backup().then(content => saveAs(content, \"deneme.zip\")).catch(error => console.log(\"error\", error));\n  },\n  className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\"\n}, \"Backup\")), __jsx(\"div\", {\n  className: \"jsx-3964893965\" + \" \" + \"container post-list-container mt-4 mb-5\"\n}, __jsx(\"h1\", {\n  className: \"jsx-3964893965\"\n}, \"Post List\"), __jsx(\"ul\", {\n  id: \"post-list\",\n  className: \"jsx-3964893965\" + \" \" + \"list-group mt-3\"\n}, listPosts(posts))), __jsx(\"div\", {\n  id: \"status-container\",\n  className: \"jsx-3964893965\"\n}, __jsx(\"p\", {\n  id: \"status\",\n  className: \"jsx-3964893965\"\n})), __jsx(_JSXStyle, {\n  id: \"3964893965\"\n}, [\"h1.jsx-3964893965{color:#d1a172;text-align:center;font-weight:800;text-transform:uppercase;}\"])));\n\nWrite.getInitialProps = async () => {\n  const res = await fetch(`${process.env.baseUrl}api/posts`);\n  const data = await res.json();\n  return {\n    posts: data.posts\n  };\n};\n\nexport default Write;","map":null,"metadata":{},"sourceType":"module"}