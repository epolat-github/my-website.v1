{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nvar _jsxFileName = \"/home/epolat/Desktop/projects/website/pages/write.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport addData from \"../src/dbCon\";\nimport { dbInstance, deletePost, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\nimport { useReducer } from \"react\";\n\nvar transferData = function transferData(data) {\n  var firestore = dbInstance();\n  var slug = data.blogSlug;\n  var name = data.blogName;\n  var detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML = \"Fill the required areas please.\";\n    return;\n  }\n\n  var post = {\n    blogName: name,\n    blogDetail: detail,\n    blogTime: _Date$now()\n  };\n  var docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n  docRef.set(post).then(function () {\n    console.log(\"Saved\");\n    document.querySelector(\"p\").innerHTML = __jsx(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"`slug: $\", slug, \",`\") + \"name: \".concat(name, \" created.\");\n  })[\"catch\"](function (error) {\n    console.log(\"Got an error:\" + error);\n    document.getElementById(\"status\").innerHTML = \"\".concat(error.message);\n  });\n};\n\nvar handlePostListClick = function handlePostListClick(post) {\n  // change the look\n  var activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\"); // show post\n\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nvar handlePostDeleteClick = function handlePostDeleteClick(post) {\n  deletePost(post);\n};\n\nvar listPosts = function listPosts(posts) {\n  return posts.map(function (post) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, __jsx(\"button\", {\n      key: post.slug,\n      id: post.slug,\n      onClick: function onClick() {\n        return handlePostListClick(post);\n      },\n      className: \"list-group-item list-group-item-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, post.title));\n  });\n};\n\nvar Write = function Write(_ref) {\n  var posts = _ref.posts;\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container pt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    style: {\n      color: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Inspire Someone!\"), __jsx(\"div\", {\n    className: \"form-group pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Blog Title\",\n    id: \"inputName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"form-group pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(\"textarea\", {\n    id: \"inputDetail\",\n    className: \"form-control\",\n    rows: \"20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-lg btn-secondary mt-3\",\n    onClick: function onClick() {\n      transferData({\n        blogSlug: document.getElementById(\"inputName\").value.replace(/\\s+/g, \"-\").toLowerCase(),\n        blogName: document.getElementById(\"inputName\").value,\n        blogDetail: document.getElementById(\"inputDetail\").value\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Post\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-lg btn-secondary mt-3 ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Delete\")), __jsx(\"div\", {\n    className: \"container post-list-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, __jsx(\"ul\", {\n    id: \"post-list\",\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, listPosts(posts))), __jsx(\"div\", {\n    id: \"status-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    id: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })));\n};\n\nWrite.getInitialProps = function _callee() {\n  var res, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(\"\".concat(process.env.baseUrl, \"api/posts\")));\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 5:\n          data = _context.sent;\n          return _context.abrupt(\"return\", {\n            posts: data.posts\n          });\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default Write;","map":{"version":3,"sources":["/home/epolat/Desktop/projects/website/pages/write.js"],"names":["addData","dbInstance","deletePost","authInstance","checkUser","Layout","fetch","useReducer","transferData","data","firestore","slug","blogSlug","name","blogName","detail","blogDetail","document","getElementById","innerHTML","post","blogTime","docRef","collection","doc","set","then","console","log","querySelector","error","message","handlePostListClick","activeListItems","classList","toggle","value","title","details","handlePostDeleteClick","listPosts","posts","map","Write","color","replace","toLowerCase","getInitialProps","process","env","baseUrl","res","json"],"mappings":"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","sourcesContent":["import addData from \"../src/dbCon\";\nimport { dbInstance, deletePost, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\nimport { useReducer } from \"react\";\n\nconst transferData = data => {\n  const firestore = dbInstance();\n\n  let slug = data.blogSlug;\n  let name = data.blogName;\n  let detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML =\n      \"Fill the required areas please.\";\n    return;\n  }\n\n  const post = { blogName: name, blogDetail: detail, blogTime: Date.now() };\n\n  const docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n\n  docRef\n    .set(post)\n    .then(() => {\n      console.log(\"Saved\");\n      document.querySelector(\"p\").innerHTML =\n        <strong>`slug: ${slug},`</strong> + `name: ${name} created.`;\n    })\n    .catch(error => {\n      console.log(\"Got an error:\" + error);\n      document.getElementById(\"status\").innerHTML = `${error.message}`;\n    });\n};\n\nconst handlePostListClick = post => {\n  // change the look\n  let activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\");\n\n  // show post\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nconst handlePostDeleteClick = post => {\n  deletePost(post);\n};\n\nconst listPosts = posts => {\n  return posts.map(post => {\n    return (\n      <div>\n        <button\n          key={post.slug}\n          id={post.slug}\n          onClick={() => handlePostListClick(post)}\n          className=\"list-group-item list-group-item-action\"\n        >\n          {post.title}\n        </button>\n      </div>\n    );\n  });\n};\n\nconst Write = ({ posts }) => (\n  <Layout>\n    <div className=\"container pt-5\">\n      <h1 style={{ color: \"white\" }}>Inspire Someone!</h1>\n      <div className=\"form-group pt-3\">\n        <input type=\"text\" placeholder=\"Blog Title\" id=\"inputName\" />\n      </div>\n      <div className=\"form-group pt-3\">\n        <textarea\n          id=\"inputDetail\"\n          className=\"form-control\"\n          rows=\"20\"\n        ></textarea>\n      </div>\n      <button\n        type=\"button\"\n        className=\"btn btn-lg btn-secondary mt-3\"\n        onClick={() => {\n          transferData({\n            blogSlug: document\n              .getElementById(\"inputName\")\n              .value.replace(/\\s+/g, \"-\")\n              .toLowerCase(),\n            blogName: document.getElementById(\"inputName\").value,\n            blogDetail: document.getElementById(\"inputDetail\").value\n          });\n        }}\n      >\n        Post\n      </button>\n      <button\n        type=\"button\"\n        className=\"btn btn-lg btn-secondary mt-3 ml-3\"\n      >Delete</button>\n    </div>\n\n    <div className=\"container post-list-container\">\n      <ul id=\"post-list\" className=\"list-group\">\n        {/* TODO: post slug || başlıklardan oluşan liste => seçince edit ve delete seçenekleri. */}\n        {listPosts(posts)}\n      </ul>\n    </div>\n\n    <div id=\"status-container\">\n      <p id=\"status\"></p>\n    </div>\n  </Layout>\n);\n\nWrite.getInitialProps = async () => {\n  const res = await fetch(`${process.env.baseUrl}api/posts`);\n  const data = await res.json();\n  return {\n    posts: data.posts\n  };\n};\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}