{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nvar _jsxFileName = \"/home/epolat/Desktop/projects/website/pages/admin.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport addData from \"../src/dbCon\";\nimport { saveAs } from 'file-saver';\nimport { dbInstance, deletePost, backup, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nvar transferData = function transferData(data) {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n\n  var firestore = dbInstance();\n  var slug = data.blogSlug;\n  var name = data.blogName;\n  var detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML = \"Fill the required areas please.\";\n    return;\n  }\n\n  var post = {\n    blogName: name,\n    blogDetail: detail,\n    blogTime: _Date$now()\n  };\n  var docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n  docRef.set(post).then(function () {\n    alert(\"Saved!\");\n    location.reload();\n  })[\"catch\"](function (error) {\n    alert(error.message);\n    document.getElementById(\"status\").innerHTML = \"\".concat(error.message);\n  });\n};\n\nvar handlePostListClick = function handlePostListClick(post) {\n  // change the look\n  var activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\"); // show post\n\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nvar handlePostDeleteClick = function handlePostDeleteClick() {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n\n  var postTitle = document.getElementById(\"inputName\").value;\n  var result = deletePost(postTitle);\n  result.then(function () {\n    alert(\"Deleted!\");\n    location.reload();\n  })[\"catch\"](function () {\n    return alert(\"Could not deleted.\");\n  });\n};\n\nvar listPosts = function listPosts(posts) {\n  return posts.map(function (post) {\n    return __jsx(\"button\", {\n      key: post.slug,\n      id: post.slug,\n      onClick: function onClick() {\n        return handlePostListClick(post);\n      },\n      className: \"list-group-item list-group-item-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, post.title);\n  });\n};\n\nvar Write = function Write(_ref) {\n  var posts = _ref.posts;\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"article\", {\n    className: \"jsx-3964893965\" + \" \" + \"jumpotron\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"container pt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"jsx-3964893965\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Inspire Someone!\"), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Blog Title\",\n    id: \"inputName\",\n    className: \"jsx-3964893965\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, __jsx(\"textarea\", {\n    id: \"inputDetail\",\n    rows: \"20\",\n    className: \"jsx-3964893965\" + \" \" + \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      transferData({\n        blogSlug: document.getElementById(\"inputName\").value.replace(/\\s+/g, \"-\").replace(/Ä±/g, \"i\").toLowerCase(),\n        blogName: document.getElementById(\"inputName\").value,\n        blogDetail: document.getElementById(\"inputDetail\").value\n      });\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-primary mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Post\"), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      return handlePostDeleteClick();\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Delete\"), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      backup().then(function (content) {\n        return saveAs(content, \"deneme.zip\");\n      })[\"catch\"](function (error) {\n        return console.log(\"error\", error);\n      });\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Backup\")), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"container post-list-container mt-4 mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"jsx-3964893965\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Post List\"), __jsx(\"ul\", {\n    id: \"post-list\",\n    className: \"jsx-3964893965\" + \" \" + \"list-group mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, listPosts(posts))), __jsx(\"div\", {\n    id: \"status-container\",\n    className: \"jsx-3964893965\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    id: \"status\",\n    className: \"jsx-3964893965\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"3964893965\",\n    __self: this\n  }, \"h1.jsx-3964893965{color:#d1a172;text-align:center;font-weight:800;text-transform:uppercase;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Vwb2xhdC9EZXNrdG9wL3Byb2plY3RzL3dlYnNpdGUvcGFnZXMvYWRtaW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0prQixBQUd5QixjQUNJLGtCQUNGLGdCQUNTLHlCQUMzQiIsImZpbGUiOiIvaG9tZS9lcG9sYXQvRGVza3RvcC9wcm9qZWN0cy93ZWJzaXRlL3BhZ2VzL2FkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkZERhdGEgZnJvbSBcIi4uL3NyYy9kYkNvblwiO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQge1xuICBkYkluc3RhbmNlLFxuICBkZWxldGVQb3N0LFxuICBiYWNrdXAsXG4gIGF1dGhJbnN0YW5jZSxcbiAgY2hlY2tVc2VyXG59IGZyb20gXCIuLi9zcmMvZGJDb25cIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvbGF5b3V0XCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xuXG5jb25zdCB0cmFuc2ZlckRhdGEgPSBkYXRhID0+IHtcbiAgaWYgKCFjb25maXJtKFwiQXJlIHlvdSBzdXJlP1wiKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBmaXJlc3RvcmUgPSBkYkluc3RhbmNlKCk7XG5cbiAgbGV0IHNsdWcgPSBkYXRhLmJsb2dTbHVnO1xuICBsZXQgbmFtZSA9IGRhdGEuYmxvZ05hbWU7XG4gIGxldCBkZXRhaWwgPSBkYXRhLmJsb2dEZXRhaWw7XG5cbiAgaWYgKHNsdWcgPT0gXCJcIiB8fCBuYW1lID09IFwiXCIgfHwgZGV0YWlsID09IFwiXCIpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKS5pbm5lckhUTUwgPVxuICAgICAgXCJGaWxsIHRoZSByZXF1aXJlZCBhcmVhcyBwbGVhc2UuXCI7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcG9zdCA9IHsgYmxvZ05hbWU6IG5hbWUsIGJsb2dEZXRhaWw6IGRldGFpbCwgYmxvZ1RpbWU6IERhdGUubm93KCkgfTtcblxuICBjb25zdCBkb2NSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbihcImJsb2dzXCIpLmRvYyhkYXRhLmJsb2dTbHVnKTtcblxuICBkb2NSZWZcbiAgICAuc2V0KHBvc3QpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgYWxlcnQoXCJTYXZlZCFcIik7XG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpLmlubmVySFRNTCA9IGAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGhhbmRsZVBvc3RMaXN0Q2xpY2sgPSBwb3N0ID0+IHtcbiAgLy8gY2hhbmdlIHRoZSBsb29rXG4gIGxldCBhY3RpdmVMaXN0SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGl2ZVwiKTtcbiAgYWN0aXZlTGlzdEl0ZW1zID8gYWN0aXZlTGlzdEl0ZW1zLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIikgOiBudWxsO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3N0LnNsdWcpLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XG5cbiAgLy8gc2hvdyBwb3N0XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXROYW1lXCIpLnZhbHVlID0gcG9zdC50aXRsZTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dERldGFpbFwiKS52YWx1ZSA9IHBvc3QuZGV0YWlscztcbn07XG5cbmNvbnN0IGhhbmRsZVBvc3REZWxldGVDbGljayA9ICgpID0+IHtcbiAgaWYgKCFjb25maXJtKFwiQXJlIHlvdSBzdXJlPyBcIikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IHBvc3RUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXROYW1lXCIpLnZhbHVlO1xuICBsZXQgcmVzdWx0ID0gZGVsZXRlUG9zdChwb3N0VGl0bGUpO1xuXG4gIHJlc3VsdFxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGFsZXJ0KFwiRGVsZXRlZCFcIik7XG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoKSA9PiBhbGVydChcIkNvdWxkIG5vdCBkZWxldGVkLlwiKSk7XG59O1xuXG5jb25zdCBsaXN0UG9zdHMgPSBwb3N0cyA9PiB7XG4gIHJldHVybiBwb3N0cy5tYXAocG9zdCA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxidXR0b25cbiAgICAgICAga2V5PXtwb3N0LnNsdWd9XG4gICAgICAgIGlkPXtwb3N0LnNsdWd9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVBvc3RMaXN0Q2xpY2socG9zdCl9XG4gICAgICAgIGNsYXNzTmFtZT1cImxpc3QtZ3JvdXAtaXRlbSBsaXN0LWdyb3VwLWl0ZW0tYWN0aW9uXCJcbiAgICAgID5cbiAgICAgICAge3Bvc3QudGl0bGV9XG4gICAgICA8L2J1dHRvbj5cbiAgICApO1xuICB9KTtcbn07XG5cbmNvbnN0IFdyaXRlID0gKHsgcG9zdHMgfSkgPT4gKFxuICA8TGF5b3V0PlxuICAgIDxhcnRpY2xlIGNsYXNzTmFtZT1cImp1bXBvdHJvblwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgcHQtNVwiPlxuICAgICAgICA8aDE+SW5zcGlyZSBTb21lb25lITwvaDE+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cCBwdC0zXCI+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJCbG9nIFRpdGxlXCIgaWQ9XCJpbnB1dE5hbWVcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwIHB0LTNcIj5cbiAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgIGlkPVwiaW5wdXREZXRhaWxcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICAgIHJvd3M9XCIyMFwiXG4gICAgICAgICAgPjwvdGV4dGFyZWE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sZyBidG4tcHJpbWFyeSBtdC0zXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICB0cmFuc2ZlckRhdGEoe1xuICAgICAgICAgICAgICBibG9nU2x1ZzogZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dE5hbWVcIilcbiAgICAgICAgICAgICAgICAudmFsdWUucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvxLEvZywgXCJpXCIpXG4gICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgIGJsb2dOYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0TmFtZVwiKS52YWx1ZSxcbiAgICAgICAgICAgICAgYmxvZ0RldGFpbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dERldGFpbFwiKS52YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIFBvc3RcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxnIGJ0bi1zZWNvbmRhcnkgbXQtMyBtbC0zXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVQb3N0RGVsZXRlQ2xpY2soKX1cbiAgICAgICAgPlxuICAgICAgICAgIERlbGV0ZVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGcgYnRuLXNlY29uZGFyeSBtdC0zIG1sLTNcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGJhY2t1cCgpXG4gICAgICAgICAgICAgIC50aGVuKChjb250ZW50KSA9PiBzYXZlQXMoY29udGVudCwgXCJkZW5lbWUuemlwXCIpKVxuICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coXCJlcnJvclwiLCBlcnJvcikpO1xuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICBCYWNrdXBcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIHBvc3QtbGlzdC1jb250YWluZXIgbXQtNCBtYi01XCI+XG4gICAgICAgIDxoMT5Qb3N0IExpc3Q8L2gxPlxuICAgICAgICA8dWwgaWQ9XCJwb3N0LWxpc3RcIiBjbGFzc05hbWU9XCJsaXN0LWdyb3VwIG10LTNcIj5cbiAgICAgICAgICB7bGlzdFBvc3RzKHBvc3RzKX1cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGlkPVwic3RhdHVzLWNvbnRhaW5lclwiPlxuICAgICAgICA8cCBpZD1cInN0YXR1c1wiPjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICBoMSB7XG4gICAgICAgICAgY29sb3I6ICNkMWExNzI7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvYXJ0aWNsZT5cbiAgPC9MYXlvdXQ+XG4pO1xuXG5Xcml0ZS5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3Byb2Nlc3MuZW52LmJhc2VVcmx9YXBpL3Bvc3RzYCk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICByZXR1cm4ge1xuICAgIHBvc3RzOiBkYXRhLnBvc3RzXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBXcml0ZTtcbiJdfQ== */\\n/*@ sourceURL=/home/epolat/Desktop/projects/website/pages/admin.js */\")));\n};\n\nWrite.getInitialProps = function _callee() {\n  var res, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(\"\".concat(process.env.baseUrl, \"api/posts\")));\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 5:\n          data = _context.sent;\n          return _context.abrupt(\"return\", {\n            posts: data.posts\n          });\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default Write;","map":{"version":3,"sources":["/home/epolat/Desktop/projects/website/pages/admin.js"],"names":["addData","saveAs","dbInstance","deletePost","backup","authInstance","checkUser","Layout","fetch","transferData","data","confirm","firestore","slug","blogSlug","name","blogName","detail","blogDetail","document","getElementById","innerHTML","post","blogTime","docRef","collection","doc","set","then","alert","location","reload","error","message","handlePostListClick","activeListItems","querySelector","classList","toggle","value","title","details","handlePostDeleteClick","postTitle","result","listPosts","posts","map","Write","replace","toLowerCase","content","console","log","getInitialProps","process","env","baseUrl","res","json"],"mappings":"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","sourcesContent":["import addData from \"../src/dbCon\";\nimport { saveAs } from 'file-saver';\nimport {\n  dbInstance,\n  deletePost,\n  backup,\n  authInstance,\n  checkUser\n} from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nconst transferData = data => {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n  const firestore = dbInstance();\n\n  let slug = data.blogSlug;\n  let name = data.blogName;\n  let detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML =\n      \"Fill the required areas please.\";\n    return;\n  }\n\n  const post = { blogName: name, blogDetail: detail, blogTime: Date.now() };\n\n  const docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n\n  docRef\n    .set(post)\n    .then(() => {\n      alert(\"Saved!\");\n      location.reload();\n    })\n    .catch(error => {\n      alert(error.message);\n      document.getElementById(\"status\").innerHTML = `${error.message}`;\n    });\n};\n\nconst handlePostListClick = post => {\n  // change the look\n  let activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\");\n\n  // show post\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nconst handlePostDeleteClick = () => {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n  let postTitle = document.getElementById(\"inputName\").value;\n  let result = deletePost(postTitle);\n\n  result\n    .then(() => {\n      alert(\"Deleted!\");\n      location.reload();\n    })\n    .catch(() => alert(\"Could not deleted.\"));\n};\n\nconst listPosts = posts => {\n  return posts.map(post => {\n    return (\n      <button\n        key={post.slug}\n        id={post.slug}\n        onClick={() => handlePostListClick(post)}\n        className=\"list-group-item list-group-item-action\"\n      >\n        {post.title}\n      </button>\n    );\n  });\n};\n\nconst Write = ({ posts }) => (\n  <Layout>\n    <article className=\"jumpotron\">\n      <div className=\"container pt-5\">\n        <h1>Inspire Someone!</h1>\n        <div className=\"form-group pt-3\">\n          <input type=\"text\" placeholder=\"Blog Title\" id=\"inputName\" />\n        </div>\n        <div className=\"form-group pt-3\">\n          <textarea\n            id=\"inputDetail\"\n            className=\"form-control\"\n            rows=\"20\"\n          ></textarea>\n        </div>\n        <button\n          type=\"button\"\n          className=\"btn btn-lg btn-primary mt-3\"\n          onClick={() => {\n            transferData({\n              blogSlug: document\n                .getElementById(\"inputName\")\n                .value.replace(/\\s+/g, \"-\")\n                .replace(/Ä±/g, \"i\")\n                .toLowerCase(),\n              blogName: document.getElementById(\"inputName\").value,\n              blogDetail: document.getElementById(\"inputDetail\").value\n            });\n          }}\n        >\n          Post\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-lg btn-secondary mt-3 ml-3\"\n          onClick={() => handlePostDeleteClick()}\n        >\n          Delete\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-lg btn-secondary mt-3 ml-3\"\n          onClick={() => {\n            backup()\n              .then((content) => saveAs(content, \"deneme.zip\"))\n              .catch(error => console.log(\"error\", error));\n          }}\n        >\n          Backup\n        </button>\n      </div>\n      <div className=\"container post-list-container mt-4 mb-5\">\n        <h1>Post List</h1>\n        <ul id=\"post-list\" className=\"list-group mt-3\">\n          {listPosts(posts)}\n        </ul>\n      </div>\n\n      <div id=\"status-container\">\n        <p id=\"status\"></p>\n      </div>\n      <style jsx>{`\n        h1 {\n          color: #d1a172;\n          text-align: center;\n          font-weight: 800;\n          text-transform: uppercase;\n        }\n      `}</style>\n    </article>\n  </Layout>\n);\n\nWrite.getInitialProps = async () => {\n  const res = await fetch(`${process.env.baseUrl}api/posts`);\n  const data = await res.json();\n  return {\n    posts: data.posts\n  };\n};\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}