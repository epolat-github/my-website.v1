{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport addData from \"../src/dbCon\";\nimport { saveAs } from 'file-saver';\nimport { dbInstance, deletePost, backup, authInstance, checkUser } from \"../src/dbCon\";\nimport Layout from \"../components/layout\";\nimport fetch from \"isomorphic-unfetch\";\n\nvar transferData = function transferData(data) {\n  if (!confirm(\"Are you sure?\")) {\n    return;\n  }\n\n  var firestore = dbInstance();\n  var slug = data.blogSlug;\n  var name = data.blogName;\n  var detail = data.blogDetail;\n\n  if (slug == \"\" || name == \"\" || detail == \"\") {\n    document.getElementById(\"status\").innerHTML = \"Fill the required areas please.\";\n    return;\n  }\n\n  var post = {\n    blogName: name,\n    blogDetail: detail,\n    blogTime: _Date$now()\n  };\n  var docRef = firestore.collection(\"blogs\").doc(data.blogSlug);\n  docRef.set(post).then(function () {\n    alert(\"Saved!\");\n    location.reload();\n  })[\"catch\"](function (error) {\n    alert(error.message);\n    document.getElementById(\"status\").innerHTML = \"\".concat(error.message);\n  });\n};\n\nvar handlePostListClick = function handlePostListClick(post) {\n  // change the look\n  var activeListItems = document.querySelector(\".active\");\n  activeListItems ? activeListItems.classList.toggle(\"active\") : null;\n  document.getElementById(post.slug).classList.toggle(\"active\"); // show post\n\n  document.getElementById(\"inputName\").value = post.title;\n  document.getElementById(\"inputDetail\").value = post.details;\n};\n\nvar handlePostDeleteClick = function handlePostDeleteClick() {\n  if (!confirm(\"Are you sure? \")) {\n    return;\n  }\n\n  var postTitle = document.getElementById(\"inputName\").value;\n  var result = deletePost(postTitle);\n  result.then(function () {\n    alert(\"Deleted!\");\n    location.reload();\n  })[\"catch\"](function () {\n    return alert(\"Could not deleted.\");\n  });\n};\n\nvar listPosts = function listPosts(posts) {\n  return posts.map(function (post) {\n    return __jsx(\"button\", {\n      key: post.slug,\n      id: post.slug,\n      onClick: function onClick() {\n        return handlePostListClick(post);\n      },\n      className: \"list-group-item list-group-item-action\"\n    }, post.title);\n  });\n};\n\nvar Write = function Write(_ref) {\n  var posts = _ref.posts;\n  return __jsx(Layout, null, __jsx(\"article\", {\n    className: \"jsx-3964893965\" + \" \" + \"jumpotron\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"container pt-5\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-3964893965\"\n  }, \"Inspire Someone!\"), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Blog Title\",\n    id: \"inputName\",\n    className: \"jsx-3964893965\"\n  })), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"form-group pt-3\"\n  }, __jsx(\"textarea\", {\n    id: \"inputDetail\",\n    rows: \"20\",\n    className: \"jsx-3964893965\" + \" \" + \"form-control\"\n  })), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      transferData({\n        blogSlug: document.getElementById(\"inputName\").value.replace(/\\s+/g, \"-\").replace(/Ä±/g, \"i\").toLowerCase(),\n        blogName: document.getElementById(\"inputName\").value,\n        blogDetail: document.getElementById(\"inputDetail\").value\n      });\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-primary mt-3\"\n  }, \"Post\"), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      return handlePostDeleteClick();\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\"\n  }, \"Delete\"), __jsx(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      backup().then(function (content) {\n        return saveAs(content, \"deneme.zip\");\n      })[\"catch\"](function (error) {\n        return console.log(\"error\", error);\n      });\n    },\n    className: \"jsx-3964893965\" + \" \" + \"btn btn-lg btn-secondary mt-3 ml-3\"\n  }, \"Backup\")), __jsx(\"div\", {\n    className: \"jsx-3964893965\" + \" \" + \"container post-list-container mt-4 mb-5\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-3964893965\"\n  }, \"Post List\"), __jsx(\"ul\", {\n    id: \"post-list\",\n    className: \"jsx-3964893965\" + \" \" + \"list-group mt-3\"\n  }, listPosts(posts))), __jsx(\"div\", {\n    id: \"status-container\",\n    className: \"jsx-3964893965\"\n  }, __jsx(\"p\", {\n    id: \"status\",\n    className: \"jsx-3964893965\"\n  })), __jsx(_JSXStyle, {\n    id: \"3964893965\"\n  }, [\"h1.jsx-3964893965{color:#d1a172;text-align:center;font-weight:800;text-transform:uppercase;}\"])));\n};\n\nWrite.getInitialProps = function _callee() {\n  var res, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(\"\".concat(process.env.baseUrl, \"api/posts\")));\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 5:\n          data = _context.sent;\n          return _context.abrupt(\"return\", {\n            posts: data.posts\n          });\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default Write;","map":null,"metadata":{},"sourceType":"module"}